<!DOCTYPE html>
<html>
  <head>
    <title>Interactive Orrery</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: black;
      }

      #center-holder {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }

      #controls {
        position: absolute;
        bottom: 20px;
        left: 20px;
        color: white;
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <div id="center-holder"></div>
    <div id="controls">
      <label>Speed:</label>
    </div>

    <script>
      let planets = [];
      let speedSlider;
      let fsButton;

      function setup() {
        const canvas = createCanvas(windowWidth, windowHeight);
        canvas.parent('center-holder');

        angleMode(DEGREES);

        planets.push(new Planet(60, 6, 1.6, 'Mercury', '#aaa'));
        planets.push(new Planet(100, 9, 1.2, 'Venus', '#c8a16a'));
        planets.push(new Planet(140, 10, 1, 'Earth', '#00f'));
        planets.push(new Planet(180, 8, 0.8, 'Mars', '#f00'));
        planets.push(new Planet(240, 20, 0.5, 'Jupiter', '#ffcc88'));
        planets.push(new Planet(300, 18, 0.4, 'Saturn', '#ddcc99', true));
        planets.push(new Planet(360, 15, 0.3, 'Uranus', '#66ffff', true));
        planets.push(new Planet(420, 14, 0.25, 'Neptune', '#3366ff'));

        speedSlider = createSlider(0.1, 5, 1, 0.1);
        speedSlider.parent('controls');

        fsButton = createButton('Fullscreen');
        fsButton.position(190, height - 40);
        fsButton.mousePressed(() => {
          let fs = fullscreen();
          fullscreen(!fs);
        });
      }

      function windowResized() {
        resizeCanvas(windowWidth, windowHeight);
      }

      function draw() {
        background(0);
        translate(width / 2, height / 2);

        // Draw the sun
        fill('#ffcc00');
        noStroke();
        ellipse(0, 0, 60, 60);

        for (let p of planets) {
          p.update();
          p.display();
        }
      }

      class Planet {
        constructor(dist, size, baseSpeed, name, color, hasRings = false) {
          this.dist = dist;
          this.size = size;
          this.baseSpeed = baseSpeed;
          this.angle = random(360);
          this.name = name;
          this.color = color;
          this.hasRings = hasRings;
        }

        update() {
          this.angle += this.baseSpeed * speedSlider.value();
        }

        display() {
          let x = cos(this.angle) * this.dist;
          let y = sin(this.angle) * this.dist;

          stroke(100);
          noFill();
          ellipse(0, 0, this.dist * 2);

          push();
          translate(x, y);
          noStroke();
          fill(this.color);
          ellipse(0, 0, this.size * 2);

          if (this.hasRings) {
            noFill();
            stroke(180);
            ellipse(0, 0, this.size * 3, this.size * 1.2);
          }

          pop();

          fill(200);
          textSize(10);
          textAlign(CENTER);
          text(this.name, x, y + this.size + 12);
        }
      }
    </script>
  </body>
</html>
